/*
 * VimE - the Vim Extensible
 */


#include <config.h>


/* for NULL. */
#ifdef HAVE_STDLIB_H
#include <stdlib.h>
#endif

/* for offsetof() */
#ifdef HAVE_STDDEF_H
#include <stddef.h>
#endif

#ifdef HAVE_STDINT_H
#include <stdint.h>
#endif


/**
 * \file defs.h
 *
 * this file used to make some defined used for VimE.
 */


#ifndef VIME_DEFS_H
#define VIME_DEFS_H


/*
 * System macros.
 */
#undef UNIX
#undef WIN32
#if defined(VIME_ON_UNIX)
#  define UNIX
#elif defined(VIME_ON_WIN32)
#  define WIN32
#endif /* defined(VIME_ON_UNIX) */


/**
 * return the container from the pointer points to the field of
 * struction.
 *
 * \param ptr pointer points to a field of a struction.
 * \param type the type of that struction.
 * \param field the field in the struction pointed by pointer.
 * \return the pointer points to the struction.
 */
#define container_of(ptr, type, field) \
    ((type*)((char*)(ptr) - offsetof(type, field)))


/**
 * the inline keyword, depends ENABLE_INLINE value.
 */
#ifdef ENABLE_INLINE
#define INLINE static inline
#else /* ENABLE_INLINE */
#define INLINE
#endif /* ENABLE_INLINE */


/**
 * the internal keyword, depends ENABLE_INLINE value.
 */
#ifndef ENABLE_INLINE
#define INTERNAL static inline
#else /* ENABLE_INLINE */
#define INTERNAL static
#endif /* ENABLE_INLINE */


/** the TRUE and FALSE value.  */
#undef TRUE
#define TRUE 1
#undef FALSE
#define FALSE 0


/** the return value of function */
#undef OK
#define OK 0
#undef FAIL
#define FAIL 1


/**
 * the extern macro.
 *
 * this macro is used to include static data in a header file.
 * normally, the data will expand to a extern declare. but if define
 * DEFINE_EXTERN_DATA, the data will expand to a define.
 */
#ifndef DEFINE_EXTERN_DATA
#define EXTERN(l, r) extern l
#else /* DEFINE_EXTERN_DATA */
#define EXTERN(l, r) l r
#endif /* DEFINE_EXTERN_DATA */


/**
 * flags type.
 */
#if defined(HAVE_UINT32_T)
typedef uint32_t flag_t;
#elif defined(HAVE_U_INIT32_T)
typedef u_int32_t flag_t;
#elif SIZEOF_INT >= 32
typedef unsigned int flag_t;
#else /* just guess long has 32 bit. */
typedef unsigned long flag_t;
#endif /* defined(HAVE_UINT32_T) */


#endif /* VIME_DEFS_H */
